{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { getFirestore, getDoc, doc, updateDoc, deleteField } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\nimport { app } from \"../../firebase\";\nimport React, { useEffect, useState } from 'react';\nimport { Container, FlatList } from \"./style\";\nimport Item from \"./item\";\nimport Button from \"../../src/components/Button\";\nimport { CommonActions } from '@react-navigation/native';\nimport { COLORS } from \"../../src/assets/colors\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar FavoriteScreen = function FavoriteScreen(_ref) {\n  var navigation = _ref.navigation;\n  var auth = getAuth(app);\n  var db = getFirestore(app);\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var getMessage = function getMessage() {\n    var d = [];\n    getDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"TextToVoice\")).then(function (doc) {\n      for (var value of doc.data().message.values()) {\n        var user = {\n          message: value,\n          src: 'Texto para Voz',\n          color: COLORS.primary\n        };\n        d.push(user);\n        setData(d);\n      }\n    }).catch(function (e) {\n      console.log('FavoriteScreen, getMessage' + e);\n    });\n    getDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"PdC\")).then(function (doc) {\n      for (var value of doc.data().message.values()) {\n        var user = {\n          message: value,\n          src: 'Prancheta de Comunicação',\n          color: COLORS.primarylight\n        };\n        d.push(user);\n        setData(d);\n      }\n    }).catch(function (e) {\n      console.log('FavoriteScreen, getMessage' + e);\n    });\n  };\n  var delALLMessage = function delALLMessage() {\n    updateDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"TextToVoice\"), {\n      message: deleteField()\n    });\n    updateDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"PdC\"), {\n      message: deleteField()\n    }).then(setData('')).catch(function (e) {\n      console.log('FavoriteScreen, delALLMessage' + e);\n    });\n  };\n  var routeUser = function routeUser(item) {\n    if (item.src == 'Prancheta de Comunicação') {\n      navigation.dispatch(CommonActions.navigate({\n        name: 'Pecs',\n        params: {\n          user: item\n        }\n      }));\n    } else {\n      navigation.dispatch(CommonActions.navigate({\n        name: 'TextToSpeech',\n        params: {\n          user: item\n        }\n      }));\n    }\n  };\n  var renderItem = function renderItem(_ref2) {\n    var item = _ref2.item;\n    return _jsx(Item, {\n      item: item,\n      onPress: function onPress() {\n        return routeUser(item);\n      },\n      color: item.color\n    });\n  };\n  useEffect(function () {\n    getMessage();\n  }, []);\n  return _jsxs(Container, {\n    children: [_jsx(FlatList, {\n      data: data,\n      renderItem: renderItem\n    }), _jsx(Button, {\n      texto: \"Excluir Itens Salvos\",\n      onClick: delALLMessage\n    })]\n  });\n};\nexport default FavoriteScreen;","map":{"version":3,"names":["AsyncStorage","getFirestore","getDoc","doc","updateDoc","deleteField","getAuth","app","React","useEffect","useState","Container","FlatList","Item","Button","CommonActions","COLORS","jsx","_jsx","jsxs","_jsxs","FavoriteScreen","_ref","navigation","auth","db","_useState","_useState2","_slicedToArray","data","setData","getMessage","d","currentUser","uid","then","value","message","values","user","src","color","primary","push","catch","e","console","log","primarylight","delALLMessage","routeUser","item","dispatch","navigate","name","params","renderItem","_ref2","onPress","children","texto","onClick"],"sources":["D:/Gabriel Teixeira/Documentos/GitHub/Aplicativo/teste_login2 (visual)/screens/FavoriteScreen/index.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { getFirestore, getDoc, doc, updateDoc, deleteField } from 'firebase/firestore'\r\nimport { getAuth } from 'firebase/auth'\r\nimport { app } from '../../firebase'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Container, FlatList } from './style';\r\nimport Item from './item'\r\nimport Button from '../../src/components/Button';\r\nimport { CommonActions } from '@react-navigation/native';\r\nimport { COLORS } from '../../src/assets/colors';\r\n\r\nconst FavoriteScreen = ({ navigation }) => {\r\n  const auth = getAuth(app);\r\n  const db = getFirestore(app);\r\n\r\n  const [data, setData] = useState([]);\r\n\r\n  const getMessage = () => {\r\n    let d = []\r\n    getDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"TextToVoice\"))\r\n      .then((doc) => {\r\n\r\n        \r\n        for (const value of doc.data().message.values()) {\r\n          const user = {\r\n            message: value,\r\n            src: 'Texto para Voz',\r\n            color: COLORS.primary\r\n          }\r\n         // console.log(user)\r\n          d.push(user)\r\n          setData(d)\r\n        }\r\n\r\n      })\r\n      .catch((e) => {\r\n        console.log('FavoriteScreen, getMessage' + e)\r\n      })\r\n    getDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"PdC\"))\r\n      .then((doc) => {\r\n        \r\n        for (const value of doc.data().message.values()) {\r\n          const user = {\r\n            message: value,\r\n            src: 'Prancheta de Comunicação',\r\n            color: COLORS.primarylight\r\n          }\r\n          //console.log(user)\r\n          d.push(user)\r\n          setData(d)\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log('FavoriteScreen, getMessage' + e)\r\n      })\r\n    \r\n\r\n  }\r\n\r\n  const delALLMessage = () => {\r\n    updateDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"TextToVoice\"), { message: deleteField() })\r\n    updateDoc(doc(db, \"users\", auth.currentUser.uid, \"fav\", \"PdC\"), { message: deleteField() })\r\n      .then(setData(''))\r\n      .catch((e) => {\r\n        console.log('FavoriteScreen, delALLMessage' + e)\r\n      })\r\n  }\r\n\r\n  //Coloca um detederminado item da lista (o que o usuário clica) como um parametro numa rota navigate para a tela desejada\r\n  const routeUser = (item) => {\r\n    //console.log(item);\r\n    //TODO: arrumar a parte de PdC para receber bem essas props de mensagem\r\n    if(item.src == 'Prancheta de Comunicação'){\r\n      navigation.dispatch(\r\n      CommonActions.navigate({\r\n        name: 'Pecs',\r\n        params: { user: item },\r\n      }),\r\n    )\r\n    }else{ \r\n    navigation.dispatch(\r\n      CommonActions.navigate({\r\n        name: 'TextToSpeech',\r\n        params: { user: item },\r\n      }),\r\n    )\r\n    }\r\n  }\r\n\r\n  const renderItem = ({ item }) =>\r\n    <Item item={item} onPress={() => routeUser(item)} color={item.color} />;\r\n\r\n  useEffect(() => {\r\n    getMessage()\r\n  }, [])\r\n\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        data={data}\r\n        renderItem={renderItem}\r\n      />\r\n      <Button texto='Excluir Itens Salvos' onClick={delALLMessage} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FavoriteScreen;"],"mappings":";AAAA,OAAOA,YAAY,MAAM,2CAA2C;AACpE,SAASC,YAAY,EAAEC,MAAM,EAAEC,GAAG,EAAEC,SAAS,EAAEC,WAAW,QAAQ,oBAAoB;AACtF,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,GAAG;AACZ,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,QAAQ;AAC5B,OAAOC,IAAI;AACX,OAAOC,MAAM;AACb,SAASC,aAAa,QAAQ,0BAA0B;AACxD,SAASC,MAAM;AAAkC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAEjD,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAAC,IAAA,EAAuB;EAAA,IAAjBC,UAAU,GAAAD,IAAA,CAAVC,UAAU;EAClC,IAAMC,IAAI,GAAGlB,OAAO,CAACC,GAAG,CAAC;EACzB,IAAMkB,EAAE,GAAGxB,YAAY,CAACM,GAAG,CAAC;EAE5B,IAAAmB,SAAA,GAAwBhB,QAAQ,CAAC,EAAE,CAAC;IAAAiB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA7BG,IAAI,GAAAF,UAAA;IAAEG,OAAO,GAAAH,UAAA;EAEpB,IAAMI,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;IACvB,IAAIC,CAAC,GAAG,EAAE;IACV9B,MAAM,CAACC,GAAG,CAACsB,EAAE,EAAE,OAAO,EAAED,IAAI,CAACS,WAAW,CAACC,GAAG,EAAE,KAAK,EAAE,aAAa,CAAC,CAAC,CACjEC,IAAI,CAAC,UAAChC,GAAG,EAAK;MAGb,KAAK,IAAMiC,KAAK,IAAIjC,GAAG,CAAC0B,IAAI,CAAC,CAAC,CAACQ,OAAO,CAACC,MAAM,CAAC,CAAC,EAAE;QAC/C,IAAMC,IAAI,GAAG;UACXF,OAAO,EAAED,KAAK;UACdI,GAAG,EAAE,gBAAgB;UACrBC,KAAK,EAAEzB,MAAM,CAAC0B;QAChB,CAAC;QAEDV,CAAC,CAACW,IAAI,CAACJ,IAAI,CAAC;QACZT,OAAO,CAACE,CAAC,CAAC;MACZ;IAEF,CAAC,CAAC,CACDY,KAAK,CAAC,UAACC,CAAC,EAAK;MACZC,OAAO,CAACC,GAAG,CAAC,4BAA4B,GAAGF,CAAC,CAAC;IAC/C,CAAC,CAAC;IACJ3C,MAAM,CAACC,GAAG,CAACsB,EAAE,EAAE,OAAO,EAAED,IAAI,CAACS,WAAW,CAACC,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,CACzDC,IAAI,CAAC,UAAChC,GAAG,EAAK;MAEb,KAAK,IAAMiC,KAAK,IAAIjC,GAAG,CAAC0B,IAAI,CAAC,CAAC,CAACQ,OAAO,CAACC,MAAM,CAAC,CAAC,EAAE;QAC/C,IAAMC,IAAI,GAAG;UACXF,OAAO,EAAED,KAAK;UACdI,GAAG,EAAE,0BAA0B;UAC/BC,KAAK,EAAEzB,MAAM,CAACgC;QAChB,CAAC;QAEDhB,CAAC,CAACW,IAAI,CAACJ,IAAI,CAAC;QACZT,OAAO,CAACE,CAAC,CAAC;MACZ;IACF,CAAC,CAAC,CACDY,KAAK,CAAC,UAACC,CAAC,EAAK;MACZC,OAAO,CAACC,GAAG,CAAC,4BAA4B,GAAGF,CAAC,CAAC;IAC/C,CAAC,CAAC;EAGN,CAAC;EAED,IAAMI,aAAa,GAAG,SAAhBA,aAAaA,CAAA,EAAS;IAC1B7C,SAAS,CAACD,GAAG,CAACsB,EAAE,EAAE,OAAO,EAAED,IAAI,CAACS,WAAW,CAACC,GAAG,EAAE,KAAK,EAAE,aAAa,CAAC,EAAE;MAAEG,OAAO,EAAEhC,WAAW,CAAC;IAAE,CAAC,CAAC;IACnGD,SAAS,CAACD,GAAG,CAACsB,EAAE,EAAE,OAAO,EAAED,IAAI,CAACS,WAAW,CAACC,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE;MAAEG,OAAO,EAAEhC,WAAW,CAAC;IAAE,CAAC,CAAC,CACxF8B,IAAI,CAACL,OAAO,CAAC,EAAE,CAAC,CAAC,CACjBc,KAAK,CAAC,UAACC,CAAC,EAAK;MACZC,OAAO,CAACC,GAAG,CAAC,+BAA+B,GAAGF,CAAC,CAAC;IAClD,CAAC,CAAC;EACN,CAAC;EAGD,IAAMK,SAAS,GAAG,SAAZA,SAASA,CAAIC,IAAI,EAAK;IAG1B,IAAGA,IAAI,CAACX,GAAG,IAAI,0BAA0B,EAAC;MACxCjB,UAAU,CAAC6B,QAAQ,CACnBrC,aAAa,CAACsC,QAAQ,CAAC;QACrBC,IAAI,EAAE,MAAM;QACZC,MAAM,EAAE;UAAEhB,IAAI,EAAEY;QAAK;MACvB,CAAC,CACH,CAAC;IACD,CAAC,MAAI;MACL5B,UAAU,CAAC6B,QAAQ,CACjBrC,aAAa,CAACsC,QAAQ,CAAC;QACrBC,IAAI,EAAE,cAAc;QACpBC,MAAM,EAAE;UAAEhB,IAAI,EAAEY;QAAK;MACvB,CAAC,CACH,CAAC;IACD;EACF,CAAC;EAED,IAAMK,UAAU,GAAG,SAAbA,UAAUA,CAAAC,KAAA;IAAA,IAAMN,IAAI,GAAAM,KAAA,CAAJN,IAAI;IAAA,OACxBjC,IAAA,CAACL,IAAI;MAACsC,IAAI,EAAEA,IAAK;MAACO,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAMR,SAAS,CAACC,IAAI,CAAC;MAAA,CAAC;MAACV,KAAK,EAAEU,IAAI,CAACV;IAAM,CAAE,CAAC;EAAA;EAEzEhC,SAAS,CAAC,YAAM;IACdsB,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,OACEX,KAAA,CAACT,SAAS;IAAAgD,QAAA,GACRzC,IAAA,CAACN,QAAQ;MACPiB,IAAI,EAAEA,IAAK;MACX2B,UAAU,EAAEA;IAAW,CACxB,CAAC,EACFtC,IAAA,CAACJ,MAAM;MAAC8C,KAAK,EAAC,sBAAsB;MAACC,OAAO,EAAEZ;IAAc,CAAE,CAAC;EAAA,CACtD,CAAC;AAEhB,CAAC;AAED,eAAe5B,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}