{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { getAuth, createUserWithEmailAndPassword, sendEmailVerification } from 'firebase/auth';\nimport { app } from \"../firebase\";\nimport { getFirestore, doc, setDoc } from 'firebase/firestore';\nimport { CommonActions } from '@react-navigation/native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport React, { useEffect, useState } from 'react';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { COLORS } from \"../src/assets/colors\";\nimport Button from \"../src/components/Button\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RegisterScreen = function RegisterScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    confPassword = _useState6[0],\n    setConfPassword = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    name = _useState8[0],\n    setName = _useState8[1];\n  var handleSignup = function handleSignup() {\n    var auth = getAuth(app);\n    var db = getFirestore(app);\n    if (email !== '' && password !== '' && confPassword !== '' && name !== '') {\n      createUserWithEmailAndPassword(auth, email, password).then(function () {\n        var user = {};\n        user.nome = name;\n        user.email = email;\n        setDoc(doc(db, \"users\", auth.currentUser.uid), user).then(function () {\n          console.log(\"Sign up, setDoc: usuário adicionado\");\n          sendEmailVerification(auth.currentUser).then(function () {\n            Alert.alert('Verificação', 'Email de Verificação enviado com sucesso, verifique o endereço: ' + email);\n            navigation.dispatch(CommonActions.reset({\n              index: 0,\n              routes: [{\n                name: 'Login'\n              }]\n            }));\n          }).catch(function (e) {\n            console.log('handleSignup, envio do email de verificação' + e);\n          });\n        }).catch(function (e) {\n          console.log('handleSignup, adição ao firestore' + e);\n        });\n      }).catch(function (e) {\n        console.log('handleSignup' + e);\n        switch (e.code) {\n          case 'auth/email-already-in-use':\n            Alert.alert('Erro', 'Email digitado já está em uso');\n            break;\n          case 'auth/invalid-email':\n            Alert.alert('Erro', 'Email inválido');\n            break;\n          case 'auth/user-disabled':\n            Alert.alert('Erro', 'Usuário desabilitado');\n            break;\n          case 'auth/operation-not-allowed':\n            Alert.alert('Erro', 'Problemas técnicos ao cadastrar');\n            break;\n        }\n      });\n    } else {\n      Alert.alert('Alerta', 'Por favor, preencha os campos acima');\n    }\n  };\n  return _jsx(SafeAreaView, {\n    style: styles.container,\n    children: _jsxs(ScrollView, {\n      children: [_jsxs(View, {\n        style: styles.divSuperior,\n        children: [_jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"Nome completo\",\n          value: name,\n          onChangeText: function onChangeText(text) {\n            return setName(text);\n          },\n          keyboardType: \"default\",\n          returnKeyType: \"next\"\n        }), _jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"Email\",\n          value: email,\n          onChangeText: function onChangeText(text) {\n            return setEmail(text);\n          },\n          keyboardType: \"email-address\",\n          returnKeyType: \"next\"\n        }), _jsx(TextInput, {\n          style: styles.input,\n          placeholder: \"Senha\",\n          value: password,\n          onChangeText: function onChangeText(text) {\n            return setPassword(text);\n          },\n          secureTextEntry: true,\n          keyboardType: \"default\",\n          returnKeyType: \"next\"\n        }), _jsx(TextInput, {\n          placeholder: \"Confirmar senha\",\n          value: confPassword,\n          onChangeText: function onChangeText(text) {\n            return setConfPassword(text);\n          },\n          style: styles.input,\n          secureTextEntry: true,\n          keyboardType: \"default\",\n          returnKeyType: \"send\"\n        })]\n      }), _jsx(View, {\n        style: styles.divInferior,\n        children: _jsx(Button, {\n          texto: \"Registre-se\",\n          onClick: handleSignup\n        })\n      })]\n    })\n  });\n};\nexport default RegisterScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    padding: 20\n  },\n  divSuperior: {\n    flex: 2,\n    alignItems: 'center'\n  },\n  divInferior: {\n    flex: 1,\n    alignItems: 'center',\n    marginTop: 20\n  },\n  input: {\n    width: '95%',\n    height: 50,\n    margin: 10,\n    borderBottomColor: COLORS.grey,\n    borderBottomWidth: 2,\n    font: '16',\n    paddingLeft: 2,\n    paddingBottom: 1\n  }\n});","map":{"version":3,"names":["getAuth","createUserWithEmailAndPassword","sendEmailVerification","app","getFirestore","doc","setDoc","CommonActions","AsyncStorage","Alert","StyleSheet","TextInput","View","ScrollView","React","useEffect","useState","SafeAreaView","COLORS","Button","jsx","_jsx","jsxs","_jsxs","RegisterScreen","_ref","navigation","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","confPassword","setConfPassword","_useState7","_useState8","name","setName","handleSignup","auth","db","then","user","nome","currentUser","uid","console","log","alert","dispatch","reset","index","routes","catch","e","code","style","styles","container","children","divSuperior","input","placeholder","value","onChangeText","text","keyboardType","returnKeyType","secureTextEntry","divInferior","texto","onClick","create","flex","justifyContent","padding","alignItems","marginTop","width","height","margin","borderBottomColor","grey","borderBottomWidth","font","paddingLeft","paddingBottom"],"sources":["D:/Gabriel Teixeira/Documentos/GitHub/Aplicativo/teste_login2 (visual)/screens/RegisterScreen.js"],"sourcesContent":["import { getAuth, createUserWithEmailAndPassword, sendEmailVerification } from 'firebase/auth'\r\nimport { app } from '../firebase'\r\nimport { getFirestore, doc, setDoc } from 'firebase/firestore'\r\nimport { CommonActions } from '@react-navigation/native'\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Alert, StyleSheet, TextInput, View, ScrollView } from 'react-native'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { SafeAreaView } from 'react-native-safe-area-context'\r\nimport { COLORS } from '../src/assets/colors'\r\nimport Button from '../src/components/Button'\r\n\r\n\r\nconst RegisterScreen = ({ navigation }) => {\r\n\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [confPassword, setConfPassword] = useState('')\r\n  const [name, setName] = useState('')\r\n\r\n\r\n  const handleSignup = () => {\r\n\r\n    const auth = getAuth(app);\r\n    const db = getFirestore(app);\r\n\r\n    if (email !== '' && password !== '' && confPassword !== '' && name !== '') {\r\n      createUserWithEmailAndPassword(auth, email, password)\r\n        .then(() => {\r\n          let user = {}\r\n            user.nome = name;\r\n            user.email = email;\r\n          setDoc(doc(db, \"users\", auth.currentUser.uid), user)\r\n            .then(() => {\r\n              console.log(\"Sign up, setDoc: usuário adicionado\")\r\n              sendEmailVerification(auth.currentUser) //TODO: REMODELAR O EMAIL DE REGISTRO\r\n                .then(() => {\r\n                  Alert.alert('Verificação', 'Email de Verificação enviado com sucesso, verifique o endereço: ' + email);\r\n                  navigation.dispatch(\r\n                    CommonActions.reset({\r\n                      index: 0,\r\n                      routes: [\r\n                        { name: 'Login' }],\r\n                    })\r\n                  );\r\n                })\r\n\r\n                .catch((e) => {\r\n                  console.log('handleSignup, envio do email de verificação' + e)\r\n                })\r\n\r\n            }).catch((e) => {\r\n              console.log('handleSignup, adição ao firestore' + e)\r\n            })\r\n          //\"Users\" -> referencia da coleção; \"userF.uid\" -> chave do documento; \"user\" -> valores do documento\r\n\r\n\r\n\r\n        })\r\n        .catch((e) => {\r\n          console.log('handleSignup' + e)\r\n          switch (e.code) {\r\n            case 'auth/email-already-in-use':\r\n              Alert.alert('Erro', 'Email digitado já está em uso')\r\n              break;\r\n            case 'auth/invalid-email':\r\n              Alert.alert('Erro', 'Email inválido')\r\n              break;\r\n            case 'auth/user-disabled':\r\n              Alert.alert('Erro', 'Usuário desabilitado')\r\n              break;\r\n            case 'auth/operation-not-allowed':\r\n              Alert.alert('Erro', 'Problemas técnicos ao cadastrar')\r\n              break;\r\n          }\r\n\r\n        }\r\n        )\r\n    } else {\r\n      Alert.alert('Alerta', 'Por favor, preencha os campos acima')\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      <ScrollView>\r\n\r\n        <View style={styles.divSuperior}>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Nome completo\"\r\n            value={name}\r\n            onChangeText={text => setName(text)}\r\n            keyboardType=\"default\"\r\n            returnKeyType=\"next\"\r\n\r\n\r\n          />\r\n          <TextInput\r\n\r\n            style={styles.input}\r\n            placeholder=\"Email\"\r\n            value={email}\r\n            onChangeText={text => setEmail(text)}\r\n            keyboardType=\"email-address\"\r\n            returnKeyType=\"next\"\r\n\r\n          />\r\n          <TextInput\r\n\r\n            style={styles.input}\r\n            placeholder=\"Senha\"\r\n            value={password}\r\n            onChangeText={text => setPassword(text)}\r\n            secureTextEntry\r\n            keyboardType=\"default\"\r\n            returnKeyType=\"next\"\r\n\r\n          />\r\n          <TextInput\r\n\r\n            placeholder=\"Confirmar senha\"\r\n            value={confPassword}\r\n            onChangeText={text => setConfPassword(text)}\r\n            style={styles.input}\r\n            secureTextEntry\r\n            keyboardType=\"default\"\r\n            returnKeyType=\"send\"\r\n\r\n          />\r\n        </View>\r\n\r\n        <View style={styles.divInferior}>\r\n          <Button texto='Registre-se' onClick={handleSignup} />\r\n        </View>\r\n\r\n      </ScrollView>\r\n    </SafeAreaView>\r\n\r\n\r\n  )\r\n}\r\n\r\nexport default RegisterScreen\r\n\r\n//TODO: AJEITAR A ESTÉTICA\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  divSuperior: {\r\n    flex: 2,\r\n    alignItems: 'center',\r\n\r\n  },\r\n  divInferior: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    marginTop: 20,\r\n\r\n  },\r\n  input: {\r\n    width: '95%',\r\n    height: 50,\r\n    margin: 10,\r\n    borderBottomColor: COLORS.grey,\r\n    borderBottomWidth: 2,\r\n    font: '16',\r\n    paddingLeft: 2,\r\n    paddingBottom: 1,\r\n\r\n  },\r\n\r\n},)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}